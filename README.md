```markdown
# Semantic Search

Semantic Search — это приложение для семантического поиска по различным типам данных: тексту, изображениям, видео и музыке. Оно использует современные модели машинного обучения (SentenceTransformer, BLIP, Whisper) для индексации и поиска содержимого на основе текстовых запросов. Приложение построено с использованием Python и Tkinter для графического интерфейса.

## Структура проекта

```plaintext
semantic_search/
├── app/
│   ├── __init__.py         # Инициализация пакета app
│   ├── main.py             # Точка входа в приложение
│   ├── ui/                 # UI-компоненты
│   │   ├── __init__.py     # Инициализация пакета ui
│   │   ├── theme.py        # Логика управления темами (светлая/темная)
│   │   ├── main_window.py  # Основное окно приложения
│   │   └── components.py   # Переиспользуемые UI-компоненты (например, история поиска)
│   └── config.py           # Централизованная конфигурация
├── core/
│   ├── __init__.py         # Инициализация пакета core
│   ├── models.py           # Управление ML-моделями (SentenceTransformer, BLIP, Whisper)
│   ├── database.py         # Абстракция для работы с SQLite базой данных
│   ├── cache.py            # Система кэширования
│   └── utils.py            # Общие утилиты (таймеры, работа с файлами)
├── processors/
│   ├── __init__.py         # Инициализация пакета processors
│   ├── text_processor.py   # Логика обработки текстовых файлов
│   ├── image_processor.py  # Логика обработки изображений
│   ├── video_processor.py  # Логика обработки видео
│   └── music_processor.py  # Логика обработки музыкальных файлов
├── requirements.txt        # Зависимости проекта
└── README.md               # Документация проекта
```

## Возможности

- **Индексация данных:** Поддержка текстовых файлов (.txt, .odt, .docx, .pdf, .csv), изображений (.png, .jpg, .jpeg), видео (.mp4) и музыки (.mp3).
- **Семантический поиск:** Поиск по текстовому запросу с использованием моделей машинного обучения.
- **Графический интерфейс:** Удобный UI с поддержкой светлой и темной тем, историей поиска и отображением результатов.
- **Дообучение:** Возможность дообучения текстовой модели на текстах песен.
- **Кэширование:** Ускорение обработки за счет сохранения результатов в кэш.

## Требования

- **Python 3.8+**
- Зависимости, указанные в `requirements.txt`
- **FFmpeg** (для обработки аудио в `music_processor.py`)
- **CUDA** (опционально, для ускорения на GPU)

## Установка

1. **Клонируйте репозиторий:**

   ```bash
   git clone <repository-url>
   cd semantic_search
   ```

2. **Создайте виртуальное окружение (опционально, но рекомендуется):**

   ```bash
   python -m venv venv
   # Linux/Mac:
   source venv/bin/activate
   # Windows:
   venv\Scripts\activate
   ```

3. **Установите зависимости:**

   ```bash
   pip install -r requirements.txt
   ```

4. **Установите FFmpeg:**
   - **Linux:** `sudo apt install ffmpeg`
   - **Mac:** `brew install ffmpeg`
   - **Windows:** Скачайте с официального сайта и добавьте в PATH.

## Запуск

1. Перейдите в директорию проекта:

   ```bash
   cd semantic_search
   ```

2. Запустите приложение:

   ```bash
   python app/main.py
   ```

3. **В интерфейсе:**
   - Выберите директории для индексации каждого типа данных.
   - Запустите индексацию нажатием соответствующих кнопок.
   - Введите поисковый запрос и выберите тип данных для поиска.

## Использование

### Индексация

- Укажите директорию и, при необходимости, расширения файлов (для текста).
- Нажмите **"Запустить индексирование"** для каждого типа данных.

### Поиск

- Введите запрос в поле ввода.
- Нажмите кнопку поиска для нужного типа данных (текст, изображения, видео, музыка).
- Результаты отобразятся в текстовом поле или в виде изображений (для видео и изображений).

### История поиска

- Двойной клик по элементу истории заполнит поле ввода.
- Кнопка **"Все"** открывает полную историю, а **"Очистить"** удаляет историю.

### Тема

- Переключение между светлой и темной темой с помощью кнопки в заголовке.

## Зависимости

Список зависимостей находится в `requirements.txt`. Основные библиотеки:

- **sentence-transformers** — для семантического поиска по тексту.
- **transformers** — для генерации описаний изображений (BLIP).
- **whisper** — для транскрипции аудио.
- **tkinter** — для графического интерфейса.
- **matplotlib** — для отображения изображений и видео.
- **mutagen** — для извлечения метаданных из MP3.
- **opencv-python (cv2)** — для обработки видео.

## Примечания

- **Производительность:** Для больших объемов данных рекомендуется использовать GPU (CUDA).
- **Кэширование:** Описания изображений сохраняются в директории `data/cache` для ускорения повторной обработки.
- **Дообучение:** Функция дообучения модели доступна для музыки через `music_processor.py`.
- **Расширяемость:** Добавление нового типа данных требует создания нового процессора в директории `processors/`.

## Разработка

Проект построен с учетом модульности и принципов SOLID:

- `app/` — отвечает за приложение и UI.
- `core/` — содержит базовую функциональность (модели, база данных, кэш, утилиты).
- `processors/` — реализует логику обработки конкретных типов данных.

**Для тестирования или доработки:**

- Добавьте юнит-тесты в директорию `tests/`.
- Внедрите асинхронность (asyncio) для длительных операций в UI.
- Настройте логирование вместо использования `print` с помощью модуля `logging`.

## Автор

Создано Вологжанином Н.А для Astra Group
```
